{"version":3,"sources":["webpack:///./src/App.vue?c5f5","webpack:///./src/App.vue","webpack:///src/App.vue","webpack:///./src/libs/storage.js","webpack:///./src/store/module/user.js","webpack:///./src/store/index.js","webpack:///./src/router/index.js","webpack:///./src/main.js"],"names":["selectortype_template_index_0_src_App","render","_h","this","$createElement","_c","_self","attrs","id","staticRenderFns","src_App","__webpack_require__","normalizeComponent","name","mounted","ssrContext","Storage","prototype","setExpire","key","value","expire","obj","data","time","Date","now","localStorage","setItem","stringify_default","getExpire","val","getItem","JSON","parse","removeItem","user","module_user","state","userInfo","username","avatar","actions","handleLogin","_ref","commit","promise_default","a","resolve","reject","handleLoginOut","_ref2","mutations","setUserInfo","clearUserInfo","Vue","use","Vuex","store","Store","modules","Router","router","routes","path","redirect","component","e","then","bind","beforeEach","to","from","next","config","productionTip","ElementUI","el","components","App","template"],"mappings":"4IAGeA,GADEC,OAFjB,WAA0B,IAAaC,EAAbC,KAAaC,eAA0BC,EAAvCF,KAAuCG,MAAAD,IAAAH,EAAwB,OAAAG,EAAA,OAAiBE,OAAOC,GAAA,SAAYH,EAAA,oBAE5GI,oBCCjB,IAuBeC,EAvBUC,EAAQ,OAcjCC,ECTAC,KAAA,MACAC,QAFA,cDYEd,GATF,EAVA,SAAAe,GACEJ,EAAQ,SAaV,KAEA,MAUgC,kDEzBhCK,QAAQC,UAAUC,UAAY,SAACC,EAAKC,EAAOC,GAC1C,IAAIC,GACHC,KAAMH,EACNI,KAAMC,KAAKC,MACXL,OAAQA,GAGTM,aAAaC,QAAQT,EAAKU,IAAeP,KAG1CN,QAAQC,UAAUa,UAAY,SAAAX,GAC7B,IAAIY,EAAMJ,aAAaK,QAAQb,GAC/B,OAAKY,GAGLA,EAAME,KAAKC,MAAMH,GACbN,KAAKC,MAAQK,EAAIP,KAAOO,EAAIV,QAC/BM,aAAaQ,WAAWhB,GACjB,MAEDY,EAAIR,MAPHQ,wCCdLK,EAAOT,aAAaG,UAAU,YAEnBO,GACbC,OAEEC,UACEC,SAAUJ,EAAOA,EAAKI,SAAW,GACjCC,OAAQL,EAAOA,EAAKK,OAAS,KAGjCC,SAEEC,YAFO,SAAAC,EAEkBrB,GAAM,IAAhBsB,EAAgBD,EAAhBC,OACb,OAAO,IAAIC,EAAAC,EAAQ,SAACC,EAASC,GACvB1B,EACFyB,EAAQzB,GAER0B,EAAO1B,GAETsB,EAAO,cAAetB,MAI1B2B,eAbO,SAAAC,GAeL,OADAN,EAD0BM,EAAVN,QACT,iBACAC,EAAAC,EAAQC,YAGnBI,WACEC,YADS,SACIf,EAAOf,GAClBI,aAAaT,UAAU,WAAYK,EAAM,MAEzCe,EAAMC,SAASC,SAAWjB,EAAKiB,SAC/BF,EAAMC,SAASE,OAASlB,EAAKkB,QAE/Ba,cAPS,WAQP3B,aAAaQ,WAAW,eChC9BoB,UAAIC,IAAIC,KAEO,IAAAC,EAAA,IAAID,IAAKE,OACtBC,SACExB,sBCLJmB,UAAIC,IAAIK,KAER,IAAMC,EAAS,IAAID,KACjBE,SAEIC,KAAM,IACNC,SAAU,WAGVD,KAAM,SACNnD,KAAM,QACNqD,UAAW,kBAAMvD,EAAAwD,EAAA,GAAAC,KAAAzD,EAAA0D,KAAA,iBAGjBL,KAAM,UACNnD,KAAM,SACNqD,UAAW,kBAAMvD,EAAAwD,EAAA,GAAAC,KAAAzD,EAAA0D,KAAA,mBAKvBP,EAAOQ,WAAW,SAACC,EAAIC,EAAMC,GAC3B,IAAI1C,EAAMJ,aAAaG,UAAU,YAC7BC,EACF0C,IACU1C,GAAmB,WAAZwC,EAAGP,KAEVjC,GAAkB,UAAXwC,EAAGP,MACpBS,IAFAA,EAAK,YAMMX,sCCvBfP,UAAImB,OAAOC,eAAgB,EAC3BpB,UAAIC,IAAIoB,KAGR,IAAIrB,WACFsB,GAAI,OACJf,SACAJ,QACAoB,YAAcC,OACdC,SAAU","file":"static/js/app.073716a6fa6be3afa9ce.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-f1807af6\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-f1807af6\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f1807af6\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div id=\"app\">\r\n    <router-view />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'App',\r\n  mounted () {\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\nbody {\r\n  background-color: rgba(170, 170, 170, 0.3);\r\n}\r\n#app {\r\n  font-family: \"Avenir\", Helvetica, Arial, sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  color: #2c3e50;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","// 键、值、过期时间（毫秒数）\r\nStorage.prototype.setExpire = (key, value, expire) => {\r\n\tlet obj = {\r\n\t\tdata: value,\r\n\t\ttime: Date.now(),\r\n\t\texpire: expire\r\n\t}\r\n\t//localStorage 设置的值不能为对象,转为json字符串\r\n\tlocalStorage.setItem(key, JSON.stringify(obj))\r\n}\r\n\r\nStorage.prototype.getExpire = key => {\r\n\tlet val = localStorage.getItem(key)\r\n\tif (!val) {\r\n\t\treturn val\r\n\t}\r\n\tval = JSON.parse(val)\r\n\tif (Date.now() - val.time > val.expire) {\r\n\t\tlocalStorage.removeItem(key)\r\n\t\treturn null\r\n\t}\r\n\treturn val.data\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/libs/storage.js","let user = localStorage.getExpire('userInfo')\r\n\r\nexport default {\r\n  state: {\r\n    // 用户信息\r\n    userInfo: {\r\n      username: user ? user.username : '',\r\n      avatar: user ? user.avatar : ''\r\n    }\r\n  },\r\n  actions: {\r\n    // 登录\r\n    handleLogin ({ commit }, data) {\r\n      return new Promise((resolve, reject) => {\r\n        if (data) {\r\n          resolve(data)\r\n        } else {\r\n          reject(data)\r\n        }\r\n        commit('setUserInfo', data)\r\n      })\r\n    },\r\n    // 退出登录\r\n    handleLoginOut ({ commit }) {\r\n      commit('clearUserInfo')\r\n      return Promise.resolve()\r\n    }\r\n  },\r\n  mutations: {\r\n    setUserInfo (state, data) {\r\n      localStorage.setExpire('userInfo', data, 3600 * 1000)  // 1h\r\n      // localStorage.setExpire('userInfo', data, 3 * 1000)  // 3s\r\n      state.userInfo.username = data.username\r\n      state.userInfo.avatar = data.avatar\r\n    },\r\n    clearUserInfo () {\r\n      localStorage.removeItem('userInfo')\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/module/user.js","import Vue from 'vue'\r\nimport Vuex from 'vuex'\r\nimport user from './module/user'\r\n\r\nVue.use(Vuex)\r\n\r\nexport default new Vuex.Store({\r\n  modules: {\r\n    user\r\n  }\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.js","import Vue from 'vue'\r\nimport Router from 'vue-router'\r\n\r\nVue.use(Router)\r\n\r\nconst router = new Router({\r\n  routes: [\r\n    {\r\n      path: '/',\r\n      redirect: '/login'\r\n    },\r\n    {\r\n      path: '/login',\r\n      name: 'login',\r\n      component: () => import('@/components/login.vue')\r\n    },\r\n    {\r\n      path: '/wechat',\r\n      name: 'wechat',\r\n      component: () => import('@/components/wechat.vue')\r\n    }\r\n  ]\r\n})\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n  let val = localStorage.getExpire('userInfo')\r\n  if (val) {\r\n    next()\r\n  } else if (!val && to.path !== '/login') {\r\n    next('/login')\r\n  } else if (!val && to.path == '/login') {\r\n    next()\r\n  }\r\n})\r\n\r\nexport default router\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","// The Vue build version to load with the `import` command\r\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\r\nimport Vue from 'vue'\r\nimport App from './App'\r\nimport ElementUI from 'element-ui';\r\nimport './libs/storage'\r\nimport store from './store'\r\nimport router from './router'\r\nimport './assets/css/reset.css'\r\nimport './assets/iconfont/iconfont.css'\r\nimport 'element-ui/lib/theme-chalk/index.css';\r\n\r\nVue.config.productionTip = false\r\nVue.use(ElementUI);\r\n\r\n/* eslint-disable no-new */\r\nnew Vue({\r\n  el: '#app',\r\n  router,\r\n  store,\r\n  components: { App },\r\n  template: '<App/>'\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}